<script>
    const createCategory = function(){            
            const submit_button = document.getElementById('button_id');
            if(submit_button){
                submit_button.addEventListener('submit', function(e){
                    e.preventDefault();
                    const value = document.getElementById('text_id').value ;

                    if(!value || value.length  < 1){
                        alert("Invalid category")
                        return;
                    }
                
                    fetch('/categories/create', {
                    method: 'POST',
                    body: JSON.stringify({
                        'category_name': value
                        }),
                    headers: {
                        'Content-Type': 'application/json'
                        }
                    })
                    .then(function(response){
                        console.log(response);
                        return response.json();
                    })
                    .then(function(jsonResponse){
                        console.log (jsonResponse);
                    // call category_id from JSON Response from server database query object for *DELETE Category Implementation
                        const anchor = document.createElement('a');
                        anchor.href ='/todo_items/<category_id>';
                        anchor.innerHTML = jsonResponse['category_name'];
                        const first_list = document.createElement('LI');
                        const delete_button = document.createElement('button');
                        delete_button.setAttribute("classname","button");
                        delete_button.dataset.removeid = jsonResponse['id']
                        delete_button.innerHTML = "&cross;";
                        first_list.innerHTML = jsonResponse['category_name'];
                        first_list.append(anchor)
                        first_list.append(delete_button);
                        const cat_list = document.createElement('UL');
                        cat_list.setAttribute("id", "categories");
                        cat_list.append(first_list);
                        document.getElementById('categories').appendChild(first_list);

                    })
                    // catch errors (error handling implementation here!)
                    .catch(
                    error =>{
                        
                        var err = document.getElementsByClassName('error')[0];
                        console.log(error, err.classList.add('show'));
                        err.setAttribute("classname", "show");
                        }
                    ) 

                })

            };
    };    
        
    // End of createCategory()

    const deleteCategories = function(){
        document.getElementById('button_id').onsubmit = function(e){
            e.preventDefault();
                           
            fetch('/categories/delete', {
                method: 'POST',
                body: JSON.stringify({
                    'category_name': validInput
                }),
                headers:{
                    'Content-Type': 'application/json'
                }
            })
                
            .then(function(response){
                console.log(response.json());
                return response.json();
            })
            
            .then(function(jsonResponse){
                createCategory();
            })
            .catch()
            
        }

    };
    // Simple display for new or first time users of the app
    const cat_items = document.querySelectorAll('#cat_list li');
    // const countArray = Array.from(count);
    
    if  (cat_items.length===0) {
        console.log(cat_items);
        const categoryDisplay = document.getElementById('five');
        categoryDisplay.innerHTML= 'You are yet create a Todo List. Give it a try today!';
        createCategory();
    
    }
        //check syntax of IF comparison and or conditioning!
    else{   
        
        console.log(cat_items);
        const categoryDisplay = document.getElementById('five');
        categoryDisplay.innerHTML= 'Your Todo Categories are listed below';
        // Display categories while iterating through database object with category_id as filter
        
    };
</script>